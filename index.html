<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Lust Engine - ThisVid & DarknessPorn</title>
  <style>
    body { font-family: Arial, sans-serif; background: #111; color: #eee; margin: 0; padding: 20px; text-align: center; }
    h1 { color: #ff4081; }
    input { padding: 12px; width: 70%; max-width: 600px; font-size: 18px; border: 2px solid #ff4081; border-radius: 8px; background: #222; color: white; }
    button { padding: 12px 24px; font-size: 18px; background: #ff4081; border: none; color: white; border-radius: 8px; cursor: pointer; margin: 15px; }
    #prefs { margin: 30px auto; max-width: 700px; background: #1a1a1a; padding: 20px; border-radius: 10px; }
    ul { list-style: none; padding: 0; }
    li { margin: 8px 0; }
    #status { color: #ffeb3b; margin: 10px; font-weight: bold; }
    footer { margin-top: 50px; font-size: 0.9em; color: #888; }
  </style>
</head>
<body>

  <h1>Lust Engine</h1>
  <p>Recherche anonyme sur ThisVid + DarknessPorn (accessibles sans restriction FR)</p>

  <input type="text" id="searchInput" placeholder="Ton fantasme (ex: amateur french bdsm)" autofocus />
  <button onclick="search()">Rechercher</button>
  <div id="status"></div>
  <div id="results" style="margin: 40px auto; max-width: 1200px; padding: 0 10px;">
  <!-- Les vidéos s'afficheront ici en grille -->
</div>

  <div id="prefs">
    <h3>Préférences (local)</h3>
    <input type="text" id="tagInput" placeholder="milf +3 ou creampie -5" />
    <button onclick="addTag()">Ajouter</button>
    <ul id="tagList"></ul>
    <button onclick="resetPrefs()" style="background:#e74c3c;">Reset tout</button>
  </div>

  <footer>
    100% anonyme · Prefs dans navigateur · Sites : ThisVid & DarknessPorn (pas de geo-block FR)
  </footer>

  <script>
  const STORAGE_KEY = 'lustEnginePrefs';
  let prefs = JSON.parse(localStorage.getItem(STORAGE_KEY)) || {};

  function savePrefs() {
    localStorage.setItem(STORAGE_KEY, JSON.stringify(prefs));
    updateList();
  }

  function updateList() {
    document.getElementById('tagList').innerHTML = Object.entries(prefs).map(([tag, w]) => `<li>${tag}: ${w}</li>`).join('');
  }

  function addTag() {
    const val = document.getElementById('tagInput').value.trim().toLowerCase();
    if (!val) return;
    const match = val.match(/^(.+?)\s*([+-]?\d*\.?\d*)$/);
    if (match) {
      prefs[match[1].trim()] = parseFloat(match[2]) || 1;
      savePrefs();
      document.getElementById('tagInput').value = '';
      showStatus('Tag ajouté !');
    } else {
      showStatus('Format invalide (ex: milf +3)');
    }
  }

  function resetPrefs() {
    if (confirm('Reset toutes les préférences ?')) {
      prefs = {};
      localStorage.removeItem(STORAGE_KEY);
      updateList();
      showStatus('Préférences reset !');
    }
  }

  function showStatus(msg) {
    const statusEl = document.getElementById('status');
    statusEl.textContent = msg;
    setTimeout(() => { statusEl.textContent = ''; }, 5000);
  }

  function search() {
    const query = document.getElementById('searchInput').value.trim();
    if (!query) {
      alert("Entre un fantasme !");
      return;
    }

    let enhanced = query;
    let applied = [];

    Object.entries(prefs).forEach(([tag, w]) => {
      if (w > 0) {
        enhanced += ` ${tag}`;
        applied.push(`+${tag}`);
      } else if (w < 0) {
        enhanced += ` -${tag}`;
        applied.push(`-${tag}`);
      }
    });

    if (applied.length > 0) {
      showStatus('Préférences appliquées : ' + applied.join(', '));
    } else {
      showStatus('Aucune préférence appliquée – ajoute des tags !');
    }

    const sites = [
      {
        name: "ThisVid",
        url: `https://thisvid.com/search/?q=${encodeURIComponent(enhanced)}`,
        color: "#FF4081"
      },
      {
        name: "DarknessPorn",
        url: `https://darknessporn.com/search/${encodeURIComponent(enhanced)}/`,
        color: "#000000"
      }
    ];

    const container = document.getElementById('results');
    container.innerHTML = '<h2 style="text-align:center; color:#ff4081; margin-bottom:20px;">Résultats boostés</h2>';

    let html = '<div style="display:flex; flex-wrap:wrap; justify-content:center; gap:30px;">';

    sites.forEach(site => {
      html += `
        <div style="background:#1a1a1a; border-radius:12px; overflow:hidden; width:300px; box-shadow:0 6px 12px rgba(0,0,0,0.6); transition:transform 0.2s;">
          <a href="${site.url}" target="_blank" style="text-decoration:none; color:white; display:block;">
            <div style="background:${site.color}; height:120px; display:flex; align-items:center; justify-content:center; font-size:24px; font-weight:bold;">
              ${site.name}
            </div>
            <div style="padding:20px;">
              <h3 style="margin:0 0 10px 0; font-size:18px;">Voir les résultats sur ${site.name}</h3>
              <p style="margin:0; font-size:14px; opacity:0.8;">Recherche boostée : "${enhanced}"</p>
            </div>
          </a>
        </div>`;
    });

    html += '</div>';
    container.innerHTML += html;

    showStatus(`Ouvre un des liens pour voir les vidéos ciblées !`);
  }

  // Init
  updateList();
</script>

</body>
</html>
